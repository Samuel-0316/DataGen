<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f0f2f5;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .process-container {
            display: flex;
            gap: 20px;
            margin-bottom: 2rem;
        }

        .left-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .right-panel {
            flex: 1;
        }

        .terminal {
            background: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            height: 300px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .terminal::-webkit-scrollbar {
            width: 8px;
        }

        .terminal::-webkit-scrollbar-track {
            background: #333;
        }

        .terminal::-webkit-scrollbar-thumb {
            background: #666;
            border-radius: 4px;
        }

        .pipeline {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .step {
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #ddd;
            transition: all 0.3s ease;
        }

        .step.active {
            background: #e3f2fd;
            border-left-color: #2196f3;
        }

        .step.completed {
            background: #e8f5e9;
            border-left-color: #4caf50;
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ccc;
        }

        .status-indicator.active {
            background: #2196f3;
            animation: pulse 1s infinite;
        }

        .status-indicator.completed {
            background: #4caf50;
        }

        .preview-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 1rem;
            height: 150px;
            overflow-y: auto;
            border: 1px solid #ddd;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        #downloadSection {
            text-align: center;
            margin-top: 1rem;
            display: none;
        }

        button {
            background: #2196f3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background: #1976d2;
        }

        .output-preview {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Processing Pipeline Status</h1>
            <p>Visualizing the text extraction and analysis process</p>
        </div>

        <div class="process-container">
            <div class="left-panel">
                <div class="terminal" id="terminal"></div>
                <div class="output-preview">
                    <h3>Current Output Preview</h3>
                    <div id="previewBox" class="preview-box">
                        Preview will appear here during processing...
                    </div>
                </div>
            </div>

            <div class="right-panel">
                <div class="pipeline">
                    <div class="step" id="step1">
                        <div class="step-header">
                            <div class="status-indicator"></div>
                            <h3>Input Processing</h3>
                        </div>
                        <p>Reading and validating input data</p>
                    </div>
                    <div class="step" id="step2">
                        <div class="step-header">
                            <div class="status-indicator"></div>
                            <h3>Text Extraction</h3>
                        </div>
                        <p>Converting to raw text format</p>
                    </div>
                    <div class="step" id="step3">
                        <div class="step-header">
                            <div class="status-indicator"></div>
                            <h3>NLP Processing</h3>
                        </div>
                        <p>Creating semantic text chunks</p>
                    </div>
                    <div class="step" id="step4">
                        <div class="step-header">
                            <div class="status-indicator"></div>
                            <h3>LLM Analysis</h3>
                        </div>
                        <p>Generating structured dataset</p>
                    </div>
                    <div class="step" id="step5">
                        <div class="step-header">
                            <div class="status-indicator"></div>
                            <h3>CSV Generation</h3>
                        </div>
                        <p>Formatting and saving data</p>
                    </div>
                </div>

                <div id="downloadSection">
                    <button onclick="downloadCSV()">Download Processed Data (CSV)</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function log(message) {
            const terminal = document.getElementById('terminal');
            const timestamp = new Date().toLocaleTimeString();
            terminal.innerHTML += `[${timestamp}] ${message}\n`;
            terminal.scrollTop = terminal.scrollHeight;
        }

        function updatePreview(text) {
            const preview = document.getElementById('previewBox');
            preview.innerHTML = text;
        }

        function updateStep(stepNumber, status) {
            const step = document.getElementById(`step${stepNumber}`);
            const indicator = step.querySelector('.status-indicator');
            
            if (status === 'active') {
                step.classList.add('active');
                step.classList.remove('completed');
                indicator.classList.add('active');
                indicator.classList.remove('completed');
            } else if (status === 'completed') {
                step.classList.remove('active');
                step.classList.add('completed');
                indicator.classList.remove('active');
                indicator.classList.add('completed');
            }
        }

        const dummyText = `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.`;

        async function startProcess() {
            // Step 1: Input Processing
            updateStep(1, 'active');
            log('Starting input processing...');
            log('Detected file type: PDF');
            log('Validating file integrity...');
            await new Promise(resolve => setTimeout(resolve, 1500));
            updatePreview('File validated successfully. Beginning extraction...');
            updateStep(1, 'completed');

            // Step 2: Text Extraction
            updateStep(2, 'active');
            log('Extracting text from document...');
            log('Processing page 1 of 3...');
            await new Promise(resolve => setTimeout(resolve, 1000));
            log('Processing page 2 of 3...');
            await new Promise(resolve => setTimeout(resolve, 1000));
            log('Processing page 3 of 3...');
            await new Promise(resolve => setTimeout(resolve, 1000));
            updatePreview(dummyText);
            updateStep(2, 'completed');

            // Step 3: NLP Processing
            updateStep(3, 'active');
            log('Initializing NLP pipeline...');
            log('Creating text chunks...');
            await new Promise(resolve => setTimeout(resolve, 2000));
            log('Analyzing semantic structure...');
            updatePreview('Chunk 1: Lorem ipsum dolor sit amet\nChunk 2: consectetur adipiscing elit\nChunk 3: Sed do eiusmod tempor');
            updateStep(3, 'completed');

            // Step 4: LLM Analysis
            updateStep(4, 'active');
            log('Starting LLM analysis...');
            log('Generating structured data...');
            await new Promise(resolve => setTimeout(resolve, 2500));
            updatePreview('{\n  "category": "Sample",\n  "sentiment": "neutral",\n  "key_points": ["Lorem ipsum", "dolor sit"]\n}');
            updateStep(4, 'completed');

            // Step 5: CSV Generation
            updateStep(5, 'active');
            log('Formatting data for CSV...');
            log('Generating final output...');
            await new Promise(resolve => setTimeout(resolve, 1500));
            updatePreview('category,sentiment,key_points\nSample,neutral,"Lorem ipsum, dolor sit"');
            updateStep(5, 'completed');

            log('Processing complete! CSV file is ready for download.');
            document.getElementById('downloadSection').style.display = 'block';
        }

        function downloadCSV() {
            const csvContent = 'category,sentiment,key_points\nSample,neutral,"Lorem ipsum, dolor sit"';
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'processed_data.csv';
            link.click();
        }

        // Start the process automatically when the page loads
        window.onload = startProcess;
    </script>
</body>
</html>